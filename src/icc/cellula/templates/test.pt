<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="test.macros['page']">
  <tal:block metal:fill-slot="content">
    My awesome content changed.
    <div id="main_content">
    </div>
    <div id="out"></div>
    <button id="next" onclick="pengine.next()">Next</button>
  </tal:block>
  <tal:block metal:fill-slot="handlebars-templates">
    <script id="entry-template" type="text/x-handlebars-template">
      <div class="entry">
        <h1>{{title}}</h1>
        <div class="body">
          {{{body}}}
        </div>
      </div>
    </script>
  </tal:block>

  <tal:block metal:fill-slot="script-src">
    <script type="text/javascript">
      var td={
      title: "All about <p> Tags",
        body: "<p>This is a post about &lt;p&gt; tags</p>"
      };
      var html=hb_pengines.template(td);
      jQuery(document).ready(function(){
      $('#main_content').html(html);
      });
    </script>
    <script type="text/x-prolog">

	        q(X) :- p(X).

		    p(a). p(b). p(c). p(d). p(e). p(f). p(g).

    </script>
    <script>
      var pengine = new Pengine({
      server:'http://127.0.0.1:3020/pengine',
      ask: 'q(X)',
      onsuccess: handleSuccess
      });
      function handleSuccess() {
      $('#out').html(this.data[0].X);
      if (!this.more) {
      $('#next').prop("disabled", true);
      }
      }
    </script>
  </tal:block>
</html>
